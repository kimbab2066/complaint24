import{ax as S,bk as N,e as h,p as e,g as t,t as k,q,aJ as s,D as g,aG as M,o as c,aD as O,X as b,a1 as R,w as _,aF as B,F as W,a4 as V,f as P,a3 as E,as as L,aN as G,aE as H,d as x}from"./index-CIvZqnG9.js";import{s as z}from"./index-Cm4eTBAt.js";import{_ as A}from"./BaseDataTable-9GefwxHF.js";import{s as F}from"./index-BPbqiqrq.js";import{s as J}from"./index-Q5f-HasL.js";import{s as X}from"./index-CS-xok40.js";import{s as K,U as Q}from"./UserMyInfoUpdate-CeeFRv0D.js";import{a as $,s as Y}from"./index-DFkLlqX2.js";import{s as T}from"./index-Qd62vs18.js";import"./index-ntJNSm1c.js";import"./index-D2qeKuO0.js";import"./index-COnWdjRO.js";import"./index-D3alGoI6.js";import"./index-B8K14yKN.js";import"./index-CI70ECEq.js";import"./index-2HQD3IZ5.js";import"./index-DrWbS65R.js";import"./index-CaYQ582G.js";import"./index-C8f_UxCN.js";import"./index-rSX_qRTu.js";import"./index-DtbhESyl.js";import"./index-CDHacQLo.js";import"./index-vf1YAX2A.js";import"./index-DRZUHWhE.js";import"./index-DaQCVIMN.js";import"./index-m-AAtQFb.js";const Z={class:"detail-header"},ee={class:"title-area"},te={class:"user-info"},se={__name:"DetailHeader",props:{title:{type:String,required:!0},userName:{type:String,default:"OOO"},userType:{type:String,default:"보호자"},status:{type:String,default:"approved"}},setup(r){const n=r,a=M(),d=N(()=>n.status==="approved"?"승인완료":"승인대기"),l=N(()=>`status-${n.status}`),m=()=>{a.push("/")};return(f,j)=>(c(),h("div",Z,[e("div",ee,[e("h1",null,k(r.title),1),e("div",te,[e("span",null,k(r.userName)+" ("+k(r.userType)+")",1),e("span",{class:q(["status",l.value])},k(d.value),3)])]),t(s(g),{label:"메인 페이지로",icon:"pi pi-arrow-right","icon-pos":"right",onClick:m})]))}},ae=S(se,[["__scopeId","data-v-81e1a2d9"]]),re={class:"table-section"},oe={__name:"UserMyPageList",setup(r){const n=M(),a=O(),d=b([]),l=b(!0),m=b(null),f=b([{field:"business_name",header:"사업명"},{field:"institution_name",header:"기관명"},{field:"created_at",header:"작성일"},{field:"status",header:"상태"},{field:"view_inquiry",header:"조사지열람"},{field:"plan",header:"지원계획서"},{field:"result",header:"결과확인"}]),j=async()=>{l.value=!0,m.value=null;try{const o=await B.get("/api/user/my-page-surveys",{params:{writer:a.user.id}});d.value=o.data.result,console.log(`======================== 
 My Page Surveys Response:`,d.value)}catch(o){console.error("Failed to fetch my page surveys:",o),m.value="데이터를 불러오는 데 실패했습니다."}finally{l.value=!1}};R(()=>{j()});const w=o=>{o.survey_no?n.push({name:"user-survey-detail",params:{survey_no:o.survey_no}}):alert("연결된 조사지 정보가 없습니다.")},p=o=>{console.log("project.support_plan_no:",o.support_plan_no),n.push({name:"user-support-plan-detail",params:{support_plan_no:o.support_plan_no}})},I=o=>{o.support_result_no&&n.push({name:"user-support-result-detail",params:{support_result_no:o.support_result_no}})},v=o=>{const U={"1f":"검토중","2f":"승인대기","3f":"반려","4f":"승인","5f":"지원종료",접수:"접수",심사중:"심사중",검토중:"검토중",승인대기:"승인대기",반려:"반려",승인:"승인",지원종료:"지원종료",접수중:"접수중"},i=o.plan_status||"접수중";return U[i]||i},C=o=>{switch(o){case"접수":return"info";case"심사중":return"warning";case"검토중":case"1f":return"warning";case"승인대기":case"2f":return"warning";case"반려":case"3f":return"danger";case"승인":case"4f":return"success";case"지원종료":case"5f":return"secondary";default:return"info"}};return(o,U)=>(c(),h("div",re,[t(A,{data:d.value,columns:f.value,loading:l.value,rows:5},{"body-status":_(({data:i})=>[t(s(F),{value:v(i),severity:C(v(i))},null,8,["value","severity"])]),"body-view_inquiry":_(({data:i})=>[t(s(g),{label:"열람하기",outlined:"",onClick:u=>w(i)},null,8,["onClick"])]),"body-plan":_(({data:i})=>[t(s(g),{label:"열람하기",outlined:"",onClick:u=>p(i),disabled:!i.support_plan_no},null,8,["onClick","disabled"])]),"body-result":_(({data:i})=>[t(s(g),{label:"결과확인",outlined:"",onClick:u=>I(i),disabled:!i.support_result_no},null,8,["onClick","disabled"])]),_:1},8,["data","columns","loading"])]))}},ne=S(oe,[["__scopeId","data-v-d843234e"]]),le={class:"support-plan-container card"},ie={class:"plan-form"},ue={class:"p-fluid"},ce={class:"p-field"},de={class:"p-field"},pe={class:"p-field"},ve={class:"attachments"},_e={class:"actions"},me={__name:"UserSupportPlan",props:{project:{type:Object,required:!0}},emits:["back"],setup(r){return(n,a)=>(c(),h("div",null,[e("div",le,[e("div",ie,[a[4]||(a[4]=e("h4",null,"지원 계획 폼",-1)),e("div",ue,[e("div",ce,[a[1]||(a[1]=e("label",{for:"project-name"},"사업",-1)),t(s(J),{id:"project-name",value:r.project.사업명,disabled:""},null,8,["value"])]),e("div",de,[a[2]||(a[2]=e("label",{for:"content"},"내용",-1)),t(s(X),{id:"content",value:r.project.planContent,rows:"5",disabled:""},null,8,["value"])]),e("div",pe,[a[3]||(a[3]=e("label",null,"첨부",-1)),e("div",ve,[(c(!0),h(W,null,V(r.project.attachments,d=>(c(),h("p",{key:d},k(d),1))),128))])])])]),e("div",_e,[t(s(g),{label:"목록으로 돌아가기",icon:"pi pi-arrow-left",onClick:a[0]||(a[0]=d=>n.$emit("back"))})])])]))}},fe=S(me,[["__scopeId","data-v-e678d792"]]),ye={class:"selection-result-container card"},he={class:"result-details"},be={class:"status-header"},ge={class:"status-pills"},$e={class:"result-body"},ke={key:0},we={key:1},je={class:"actions"},Ie={__name:"UserSupportResult",props:{project:{type:Object,required:!0}},emits:["back"],setup(r){return(n,a)=>(c(),h("div",null,[e("div",ye,[e("div",he,[e("div",be,[a[1]||(a[1]=e("h4",null,"지원 결과",-1)),e("div",ge,[e("span",{class:q(["status-pill",{active:r.project.status==="selected"}])},"선정",2),e("span",{class:q(["status-pill",{active:r.project.status==="rejected"}])},"반려",2)])]),e("div",$e,[a[2]||(a[2]=e("h5",null,"사유",-1)),e("p",null,k(r.project.reason),1),r.project.status==="rejected"?(c(),h("h5",ke,"반려 사유")):P("",!0),r.project.status==="rejected"?(c(),h("p",we,k(r.project.rejectionReason),1)):P("",!0)])]),e("div",je,[t(s(g),{label:"목록으로 돌아가기",icon:"pi pi-arrow-left",onClick:a[0]||(a[0]=d=>n.$emit("back"))})])])]))}},Se=S(Ie,[["__scopeId","data-v-428f9135"]]),Ce={class:"card"},xe={class:"p-d-flex p-jc-between p-mb-3",style:{display:"flex","justify-content":"space-between","margin-bottom":"1.5rem"}},Ue={__name:"UserWardInfoUpdate",props:{userId:{type:String,required:!0}},setup(r){const n=r,a=M(),d=b([]),l=async()=>{try{const p=await B.get("/api/user/wardlist",{params:{guardianId:n.userId}});d.value=p.data.result}catch(p){console.error("피보호자 목록을 불러오는 데 실패했습니다:",p)}};R(()=>{l()});const m=()=>{a.push({name:"user-ward-insert"})},f=p=>{a.push({name:"user-ward-edit",params:{ward_no:p.ward_no}})},j=p=>{alert(`'${p.name}'의 지원 기록 보기 기능은 현재 준비 중입니다.`)},w=p=>{switch(p){case"긴급":return"priority-urgent";case"중점":return"priority-important";case"준비":return"priority-ready";default:return""}};return(p,I)=>(c(),h("div",Ce,[e("div",xe,[I[0]||(I[0]=e("h5",null,"피보호자 관리",-1)),t(s(g),{label:"신규 등록",icon:"pi pi-plus",class:"p-button-success",onClick:m})]),t(s(Y),{value:d.value,responsiveLayout:"scroll"},{default:_(()=>[t(s($),{field:"name",header:"이름"}),t(s($),{field:"sex",header:"성별"}),t(s($),{field:"age",header:"나이"}),t(s($),{header:"주소"},{body:_(v=>[E(k(v.data.address?v.data.address.split("!").join(", "):""),1)]),_:1}),t(s($),{field:"guardian_relation",header:"관계"}),t(s($),{field:"disabled_level",header:"장애 수준"}),t(s($),{header:"서비스 우선순위"},{body:_(v=>[t(s(F),{value:v.data.priority_status||"없음",class:q(w(v.data.priority_status))},null,8,["value","class"])]),_:1}),t(s($),{header:"지원 기록"},{body:_(v=>[t(s(g),{label:"기록보기",onClick:C=>j(v.data),class:"p-button-text"},null,8,["onClick"])]),_:1}),t(s($),{header:"정보 수정"},{body:_(v=>[t(s(g),{label:"정보수정",onClick:C=>f(v.data),class:"p-button-text"},null,8,["onClick"])]),_:1})]),_:1},8,["value"])]))}},Te=S(Ue,[["__scopeId","data-v-d188bd29"]]),qe={class:"card"},Pe={class:"title-section"},Me={class:"page-title"},Ne={__name:"UserMyPage",setup(r){const n=H(),a=M(),d=O(),l=b("list"),m=b(null),f=b(0),j=d.user.id,w=b(null),p=["신청 사업 목록","상담내역","내 정보 관리","피보호자 관리"],I=N(()=>p[f.value]||"마이페이지"),v=async()=>{try{const u=await B.get("/api/user/me",{params:{userId:j}});w.value=u.data.result}catch(u){console.error("사용자 정보를 불러오는 데 실패했습니다:",u)}};L(()=>n.query.tab,u=>{const y=parseInt(u,10);!isNaN(y)&&y>=0&&y<p.length&&(f.value=y)},{immediate:!0}),L(f,u=>{n.query.tab!==u.toString()&&a.push({query:{tab:u}})}),G(()=>{n.query.tab===void 0&&(f.value=-1)}),R(()=>{v(),n.query.tab===void 0&&(f.value=0,a.replace({query:{tab:0}}))});const C=b([{label:"마이페이지"}]),o=u=>{m.value=u,l.value="plan"},U=u=>{m.value=u,l.value="result"},i=()=>{m.value=null,l.value="list"};return(u,y)=>(c(),h("div",qe,[l.value==="list"?(c(),h(W,{key:0},[t(s(z),{home:{icon:"pi pi-home",url:"/ud"},model:C.value},null,8,["model"]),e("div",Pe,[e("h2",Me,k(I.value),1),t(s(g),{label:"메인 페이지로",icon:"pi pi-arrow-right","icon-pos":"right",onClick:y[0]||(y[0]=D=>s(a).push("/ud"))})])],64)):(c(),x(ae,{key:1,title:l.value==="plan"?"지원 계획 열람":"결과 확인"},null,8,["title"])),t(s(K),{activeIndex:f.value,"onUpdate:activeIndex":y[1]||(y[1]=D=>f.value=D)},{default:_(()=>[t(s(T),{header:"신청 사업 목록"},{default:_(()=>[l.value==="list"?(c(),x(ne,{key:0,onGoToPlan:o,onGoToResult:U})):l.value==="plan"?(c(),x(fe,{key:1,project:m.value,onBack:i},null,8,["project"])):l.value==="result"?(c(),x(Se,{key:2,project:m.value,onBack:i},null,8,["project"])):P("",!0)]),_:1}),t(s(T),{header:"상담내역"},{default:_(()=>[...y[2]||(y[2]=[e("p",{class:"placeholder-text"},"상담내역 컨텐츠가 준비중입니다.",-1)])]),_:1}),t(s(T),{header:"내 정보 관리"},{default:_(()=>[w.value&&w.value.user_id?(c(),x(Q,{key:0,"user-info":w.value},null,8,["user-info"])):P("",!0)]),_:1}),t(s(T),{header:"피보호자 관리"},{default:_(()=>[t(Te,{userId:s(j)},null,8,["userId"])]),_:1})]),_:1},8,["activeIndex"])]))}},lt=S(Ne,[["__scopeId","data-v-c711b929"]]);export{lt as default};
