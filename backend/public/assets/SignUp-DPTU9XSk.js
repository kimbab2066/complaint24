import{ax as L,X as t,e as d,p as s,q as z,aK as N,f as m,t as f,j as a,aH as r,g as F,r as G,bp as H,aF as Y,aG as K,o as p}from"./index-CIvZqnG9.js";const O={class:"signup-container"},X={class:"signup-box"},Z={class:"role-tabs"},J={key:0,class:"error-message server-error-box"},Q={class:"form-group"},W={class:"id-input-group"},ee={key:0,class:"inline-error-message"},se={class:"form-group"},oe={class:"form-group"},te={key:0,class:"inline-error-message mx-1 test-sm"},le={class:"form-group"},ae={class:"form-group"},re={class:"birth-input-group"},ne={class:"form-group"},ue={class:"form-group"},ie={class:"form-group"},de={class:"address-input-group"},pe={key:1,class:"error-message"},ve={class:"form-group"},me={class:"form-group"},ce={class:"postcode-modal-content"},be={class:"login-options signup-options"},fe={class:"remember-me"},ge={key:0,class:"inline-error-message mt-1 text-sm"},ye={__name:"SignUp",setup(xe){const u=t("1a"),c=t(""),g=t(""),h=t(""),C=t(""),w=t(""),q=t(""),y=t(""),x=t(""),b=t(""),D=t(""),$=t(""),S=t(""),M=t(!1),A=t(""),k=t(""),U=t(""),i=t(""),v=t(""),P=K(),V=t(!1),T=async()=>{if(i.value="",!c.value){i.value="아이디를 입력해주세요";return}try{(await Y.get("/api/register/check",{params:{userId:c.value}})).data.exists?i.value="이미 가입된 아이디 입니다":i.value="사용 가능한 아이디 입니다"}catch{i.value="아이디 중복 검사 중 오류발생"}},B=async()=>{if(k.value="",U.value="",v.value="",g.value!==h.value){k.value="비밀번호와 비밀번호 확인이 일치하지 않습니다.";return}if(!M.value){U.value="필수 약관에 동의해야 회원가입을 완료할 수 있습니다.";return}const l=`${D.value.padStart(4,"0")}-${$.value.padStart(2,"0")}-${S.value.padStart(2,"0")}`,e=`${y.value}!${x.value}${b.value?"! "+b.value:""}`,n={userId:c.value,password:g.value,name:C.value,birthDate:l,email:w.value,phone:q.value,fullAddress:e,role:u.value};try{await Y.post("/api/register",n),alert("회원가입이 완료되었습니다"),E()}catch(o){if(console.error("회원가입 실패"),o.response){const _=o.response.data.message;_&&_.includes("이미 등록된")?v.value="이미 등록된 이용자입니다!":v.value=_||"회원가입 중 서버 오류"}else v.value="네트워크 오류가 발생했습니다. 다시 시도해 주세요"}},E=()=>{P.back()},R=()=>{V.value=!0,A.value=""},j=l=>{V.value=!1;let e="",n="";l.userSelectedType==="R"?e=l.roadAddress:e=l.jibunAddress,l.bname!==""&&/[동|로|가]$/g.test(l.bname)&&(n+=l.bname),l.buildingName!==""&&l.apartment==="Y"&&(n+=n!==""?", "+l.buildingName:l.buildingName),n!==""&&(e+=`(${n})`),y.value=l.zonecode,x.value=e,b.value="",setTimeout(()=>{var o;(o=document.getElementById("address-detail"))==null||o.focus()},100)},I=()=>{V.value=!1};return(l,e)=>{const n=G("VueDaumPostcode");return p(),d("div",O,[s("div",X,[s("div",Z,[s("button",{class:z(["tab-button",{active:u.value==="1a"}]),onClick:e[0]||(e[0]=o=>u.value="1a")}," 일반 이용자 ",2),s("button",{class:z(["tab-button",{active:u.value==="2a"}]),onClick:e[1]||(e[1]=o=>u.value="2a")}," 기관 담당자 ",2),s("button",{class:z(["tab-button",{active:u.value==="3a"}]),onClick:e[2]||(e[2]=o=>u.value="3a")}," 기관 관리자 ",2)]),s("form",{onSubmit:N(B,["prevent"])},[v.value?(p(),d("p",J,f(v.value),1)):m("",!0),s("div",Q,[e[16]||(e[16]=s("label",{for:"user-id"},"아이디",-1)),s("div",W,[a(s("input",{id:"user-id",type:"text","onUpdate:modelValue":e[3]||(e[3]=o=>c.value=o),placeholder:"아이디를 입력해주세요",required:""},null,512),[[r,c.value]]),s("button",{type:"button",class:"btn-id-check",onClick:T},"중복체크")]),i.value?(p(),d("p",ee,f(i.value),1)):m("",!0)]),s("div",se,[e[17]||(e[17]=s("label",{for:"password"},"비밀번호",-1)),a(s("input",{id:"password",type:"password","onUpdate:modelValue":e[4]||(e[4]=o=>g.value=o),placeholder:"비밀번호 입력해주세요",required:""},null,512),[[r,g.value]])]),s("div",oe,[e[18]||(e[18]=s("label",{for:"confirm-password"},"비밀번호 확인",-1)),a(s("input",{id:"confirm-password",type:"password","onUpdate:modelValue":e[5]||(e[5]=o=>h.value=o),placeholder:"비밀번호를 확인하세요",required:""},null,512),[[r,h.value]]),k.value?(p(),d("p",te,f(k.value),1)):m("",!0)]),s("div",le,[e[19]||(e[19]=s("label",{for:"name"},"이름",-1)),a(s("input",{id:"name",type:"text","onUpdate:modelValue":e[6]||(e[6]=o=>C.value=o),placeholder:"이름",required:""},null,512),[[r,C.value]])]),s("div",ae,[e[20]||(e[20]=s("label",null,"생년월일",-1)),s("div",re,[a(s("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=o=>D.value=o),placeholder:"년 (YYYY)",maxlength:"4",required:""},null,512),[[r,D.value]]),a(s("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=o=>$.value=o),placeholder:"월 (MM)",maxlength:"2",required:""},null,512),[[r,$.value]]),a(s("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=o=>S.value=o),placeholder:"일 (DD)",maxlength:"2",required:""},null,512),[[r,S.value]])])]),s("div",ne,[e[21]||(e[21]=s("label",{for:"email"},"이메일",-1)),a(s("input",{id:"email",type:"email","onUpdate:modelValue":e[10]||(e[10]=o=>w.value=o),placeholder:"이메일 주소",required:""},null,512),[[r,w.value]])]),s("div",ue,[e[22]||(e[22]=s("label",{for:"phone"},"전화번호",-1)),a(s("input",{id:"phone",type:"tel","onUpdate:modelValue":e[11]||(e[11]=o=>q.value=o),placeholder:"010-1234-5678",required:""},null,512),[[r,q.value]])]),s("div",ie,[e[23]||(e[23]=s("label",{for:"address-zip"},"주소",-1)),s("div",de,[a(s("input",{id:"address-zip",type:"text","onUpdate:modelValue":e[12]||(e[12]=o=>y.value=o),placeholder:"우편번호",required:"",readonly:""},null,512),[[r,y.value]]),s("button",{type:"button",class:"btn-zipcode-search",onClick:R}," 우편번호 찾기 ")])]),A.value?(p(),d("p",pe,f(A.value),1)):m("",!0),s("div",ve,[a(s("input",{id:"address-main",type:"text","onUpdate:modelValue":e[13]||(e[13]=o=>x.value=o),placeholder:"기본 주소",required:"",readonly:""},null,512),[[r,x.value]])]),s("div",me,[a(s("input",{id:"address-detail",type:"text","onUpdate:modelValue":e[14]||(e[14]=o=>b.value=o),placeholder:"상세 주소 (동/호수 등)"},null,512),[[r,b.value]])]),V.value?(p(),d("div",{key:2,class:"postcode-modal-overlay",onClick:N(I,["self"])},[s("div",ce,[F(n,{onComplete:j,width:600,height:600,animation:!0,theme:{bgColor:"#fff",searchColor:"#3498db"}}),s("button",{class:"close-btn",onClick:I},"닫기")])])):m("",!0),s("div",be,[s("div",fe,[a(s("input",{id:"agree-terms",type:"checkbox","onUpdate:modelValue":e[15]||(e[15]=o=>M.value=o)},null,512),[[H,M.value]]),e[24]||(e[24]=s("label",{for:"agree-terms"},"[필수] 이용약관 및 개인정보 처리방침 동의",-1))]),e[25]||(e[25]=s("br",null,null,-1)),U.value?(p(),d("p",ge,f(U.value),1)):m("",!0)]),s("div",{class:"action-buttons"},[e[26]||(e[26]=s("button",{type:"submit",class:"btn-login"},"회원가입",-1)),s("button",{type:"button",class:"btn-signup",onClick:E},"취소")])],32)])])}}},Ue=L(ye,[["__scopeId","data-v-905bf2fe"]]);export{Ue as default};
