import{X as b,as as y,e as u,o as p,p as t,g as n,aJ as r,F as c,a4 as v,t as d,aF as x,bk as w,f as V,a3 as $,q as k}from"./index-CIvZqnG9.js";import{s as i}from"./index-Q5f-HasL.js";import{s as U}from"./index-CS-xok40.js";const B={class:"border rounded-md p-4 mt-2 shadow-sm bg-gray-50"},C={class:"flex flex-col gap-4"},N={class:"flex gap-4"},S={class:"w-1/2"},j={class:"w-1/2"},F={class:"flex gap-4"},P={class:"w-1/2"},h={class:"w-1/2"},A={key:0},D={class:"list-disc ml-5 text-sm text-gray-600"},I={key:1,class:"text-sm text-gray-400"},L={__name:"SupportPlanDetail",props:{item:Object,dropdownItems:Array},setup(o){const m=o,l=b({support_plan_no:null,support_plan_goal:"",staff_name:"",business_name:"",spend:0,created_at:"",writer_date:"",priority_no:"",plan:"",file_names:"",support_plan_status:""});y(()=>m.item,a=>{a&&(l.value={support_plan_no:null,support_plan_goal:"",staff_name:"",business_name:"",spend:0,created_at:"",writer_date:"",priority_no:"",plan:"",file_names:"",support_plan_status:"",...a})},{immediate:!0});const g=a=>{if(a==null)return"";const e=String(a).replace(/[^0-9]/g,"");return e?Number(e).toLocaleString():""},f=async()=>{if(l.value.support_plan_no)try{const a=await x.post(`/api/staff/support-plan/SupportPlanDetail/${l.value.support_plan_no}`);alert(a.data.message||"승인 완료"),l.value.support_plan_status="승인"}catch(a){console.error(a),alert("승인 중 오류 발생")}};return(a,e)=>(p(),u("div",B,[t("div",C,[t("div",null,[e[7]||(e[7]=t("label",{class:"font-semibold text-gray-700"},"목표",-1)),n(r(i),{modelValue:l.value.support_plan_goal,"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.support_plan_goal=s),readonly:"",class:"w-full bg-gray-100"},null,8,["modelValue"])]),t("div",null,[e[8]||(e[8]=t("label",{class:"font-semibold text-gray-700"},"작성자",-1)),n(r(i),{modelValue:l.value.staff_name,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.staff_name=s),readonly:"",class:"w-full bg-gray-100"},null,8,["modelValue"])]),t("div",N,[t("div",S,[e[9]||(e[9]=t("label",{class:"font-semibold text-gray-700"},"지원계획",-1)),n(r(i),{modelValue:l.value.business_name,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.business_name=s),readonly:"",class:"w-full bg-gray-100"},null,8,["modelValue"])]),t("div",j,[e[10]||(e[10]=t("label",{class:"font-semibold text-gray-700"},"예상지원금액",-1)),n(r(i),{value:g(l.value.spend),readonly:"",class:"w-full text-right bg-gray-100"},null,8,["value"])])]),t("div",F,[t("div",P,[e[11]||(e[11]=t("label",{class:"font-semibold text-gray-700"},"작성일",-1)),n(r(i),{modelValue:l.value.created_at,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.created_at=s),readonly:"",class:"w-full bg-gray-100"},null,8,["modelValue"])]),t("div",h,[e[12]||(e[12]=t("label",{class:"font-semibold text-gray-700"},"요청일",-1)),n(r(i),{modelValue:l.value.writer_date,"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.writer_date=s),readonly:"",class:"w-full bg-gray-100"},null,8,["modelValue"])])]),t("div",null,[e[13]||(e[13]=t("label",{class:"font-semibold text-gray-700"},"현재상태",-1)),n(r(i),{modelValue:l.value.support_plan_status,"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.support_plan_status=s),readonly:"",class:"w-full bg-gray-100"},null,8,["modelValue"])]),t("div",null,[e[14]||(e[14]=t("label",{class:"font-semibold text-gray-700"},"내용",-1)),n(r(U),{modelValue:l.value.plan,"onUpdate:modelValue":e[6]||(e[6]=s=>l.value.plan=s),rows:"4",readonly:"",class:"w-full bg-gray-100"},null,8,["modelValue"])]),l.value.file_names&&l.value.file_names.length?(p(),u("div",A,[e[15]||(e[15]=t("label",{class:"font-semibold text-gray-700"},"업로드 PDF",-1)),t("ul",D,[(p(!0),u(c,null,v(l.value.file_names.split(","),(s,_)=>(p(),u("li",{key:_},d(s),1))),128))])])):(p(),u("div",I,"첨부 파일 없음")),t("div",{class:"flex justify-end gap-4 mt-6"},[t("button",{onClick:f,class:"px-6 py-2 bg-green-500 text-white font-semibold rounded-lg hover:bg-green-600 transition-colors"}," 승인 ")])])]))}},O={class:"w-full bg-gray-50 p-6 rounded-xl shadow-md border border-gray-200"},q={class:"flex justify-between items-start"},z={class:"text-2xl font-bold text-gray-900"},E={class:"text-gray-500 text-base ml-2"},J={class:"text-gray-500 text-base mt-1"},M={class:"px-4 py-2 text-base border rounded-lg hover:bg-gray-100"},T={class:"flex justify-between items-center mt-6"},X={class:"flex items-center gap-4"},G={class:"text-gray-600 text-base font-semibold"},H={key:0},W={__name:"SupportPlanItem",props:{item:Object,isActive:Boolean,allowMultiple:Boolean},emits:["toggle-detail"],setup(o,{emit:m}){const l=o,g=m,f=w(()=>l.item.priority==="긴급"?"bg-red-500":l.item.priority==="중점"?"bg-yellow-500":"bg-green-500"),a=()=>{g("toggle-detail",l.item.support_plan_no)};return(e,s)=>(p(),u("div",O,[t("div",q,[t("div",null,[t("h2",z,[$(d(o.item.support_plan_goal)+" ",1),t("span",E,d(o.item.created_at),1)]),t("p",J,d(o.item.plan),1)]),t("button",M,d(o.item.staff_name),1)]),t("div",T,[t("span",{class:k(`px-3 py-1 text-white rounded-lg text-base ${f.value}`)},d(o.item.priority),3),t("div",X,[t("span",G," 요청일: "+d(o.item.writer_date||"-"),1),t("button",{onClick:a,class:"px-4 py-2 border rounded-lg text-base hover:bg-gray-100"}," 자세히보기 ")])]),o.isActive?(p(),u("div",H,[n(L,{item:o.item},null,8,["item"])])):V("",!0)]))}};export{W as _};
