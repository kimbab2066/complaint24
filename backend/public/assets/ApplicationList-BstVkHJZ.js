import{X as t,aN as v,aF as g,bk as y,e as r,p as c,g as w,aJ as m,F as L,a4 as x,o as l,d as k}from"./index-CIvZqnG9.js";import{s as h}from"./index-Q5f-HasL.js";import{_ as C}from"./SupportPlanItem-Bx3Ij0N3.js";import"./index-CS-xok40.js";const T={class:"card"},B={class:"p-input-icon-left w-full mb-4"},V={key:0,class:"flex flex-col gap-4"},b={key:1,class:"text-center p-6 text-lg text-gray-500"},O={__name:"ApplicationList",setup(D){const _=t(!1),n=t([]),p=t(!1),o=t(""),u=t(null),i=e=>{switch(e){case 1:return"긴급";case 2:return"중점";case 3:return"준비";default:return"준비"}},d=e=>{_.value||(u.value=u.value===e?null:e)};v(async()=>{p.value=!0;try{const e=await g.get("/api/staff/support-plan");n.value=e.data.map(a=>({support_plan_no:a.support_plan_no,support_plan_goal:a.support_plan_goal||"",staff_name:a.staff_name||"",created_at:a.created_at?a.created_at.split("T")[0]:"",writer_date:a.writer_date?a.writer_date.split("T")[0]:"",priority_no:a.priority_no,priority:i(a.priority_no),business_name:a.business_name||"",spend:a.spend||0,plan:a.plan||"",file_names:a.file_names||"",support_plan_status:a.support_plan_status||a.status||""}))}catch(e){console.error("Support Plan 조회 오류:",e)}finally{p.value=!1}});const f=y(()=>{if(!o.value)return n.value;const e=o.value.toLowerCase();return n.value.filter(a=>a.support_plan_goal.toLowerCase().includes(e)||a.staff_name.toLowerCase().includes(e)||a.priority.toLowerCase().includes(e))});return(e,a)=>(l(),r("div",T,[c("div",B,[a[1]||(a[1]=c("i",{class:"pi pi-search"},null,-1)),w(m(h),{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=s=>o.value=s),placeholder:"지원제목, 작성자, 우선순위 등으로 검색",class:"w-full p-inputtext-lg"},null,8,["modelValue"])]),p.value?(l(),r("div",b,"데이터 불러오는 중...")):(l(),r("div",V,[(l(!0),r(L,null,x(f.value,s=>(l(),k(C,{key:s.support_plan_no,item:s,"is-active":u.value===s.support_plan_no,"allow-multiple":_.value,onToggleDetail:()=>d(s.support_plan_no)},null,8,["item","is-active","allow-multiple","onToggleDetail"]))),128))]))]))}};export{O as default};
