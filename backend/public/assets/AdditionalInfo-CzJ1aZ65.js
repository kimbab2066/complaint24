import{ax as U,aD as w,Z as z,X as a,a1 as Y,aE as B,aG as E,e as k,p as t,aK as S,f as I,j as n,aH as d,g as P,r as j,o as V,bj as L}from"./index-CIvZqnG9.js";const N={class:"login-container"},R={class:"login-box"},Z={class:"form-group"},G={class:"birth-input-group"},H={class:"form-group"},K={class:"form-group"},O={class:"address-input-group"},X={class:"postcode-modal-content"},F={class:"action-buttons"},J=["disabled"],Q={__name:"AdditionalInfo",setup(W){const T=B(),D=E(),_=w(),i=z(),h=a(null),b=a(!1),p=a(""),c=a(""),v=a(""),m=a(""),f=a(""),u=a(""),r=a(""),A=a(""),y=a(!1);Y(()=>{const o=T.query.signupToken;o?h.value=o:(i.add({severity:"error",summary:"오류",detail:"잘못된 접근입니다.",life:3e3}),D.push({name:"login"}))});const $=async()=>{var o,e;if(!p.value||!c.value||!v.value||!m.value||!u.value){i.add({severity:"warn",summary:"정보 부족",detail:"모든 필수 정보를 입력해주세요.",life:3e3});return}b.value=!0;try{const l=`${c.value.padStart(4,"0")}-${v.value.padStart(2,"0")}-${m.value.padStart(2,"0")}`,s=`${f.value}!${u.value}${r.value?"! "+r.value:""}`,M={signupToken:h.value,birthDate:l,phone:p.value,fullAddress:s},x=await L.completeSocialSignup(M);await _.handleSocialLogin({accessToken:x.data.accessToken,refreshToken:x.data.refreshToken}),i.add({severity:"success",summary:"성공",detail:"회원가입이 완료되었습니다! 환영합니다.",life:3e3})}catch(l){console.error("추가 정보 제출 실패:",l),i.add({severity:"error",summary:"가입 실패",detail:((e=(o=l.response)==null?void 0:o.data)==null?void 0:e.message)||"회원가입을 완료하는 중 오류가 발생했습니다.",life:3e3})}finally{b.value=!1}},q=()=>{y.value=!0,A.value=""},g=()=>{y.value=!1},C=o=>{y.value=!1;let e=o.userSelectedType==="R"?o.roadAddress:o.jibunAddress;f.value=o.zonecode,u.value=e,r.value="",setTimeout(()=>{var l;return(l=document.getElementById("address-detail"))==null?void 0:l.focus()},100)};return(o,e)=>{const l=j("VueDaumPostcode");return V(),k("div",N,[t("div",R,[e[11]||(e[11]=t("div",{class:"text-center mb-5"},[t("div",{class:"text-900 text-3xl font-medium mb-3"},"추가 정보 입력"),t("span",{class:"text-600 font-medium"},"소셜 로그인을 완료하려면 추가 정보가 필요합니다.")],-1)),t("form",{onSubmit:S($,["prevent"])},[t("div",Z,[e[8]||(e[8]=t("label",null,"생년월일",-1)),t("div",G,[n(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>c.value=s),placeholder:"년 (YYYY)",maxlength:"4",required:""},null,512),[[d,c.value]]),n(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>v.value=s),placeholder:"월 (MM)",maxlength:"2",required:""},null,512),[[d,v.value]]),n(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=s=>m.value=s),placeholder:"일 (DD)",maxlength:"2",required:""},null,512),[[d,m.value]])])]),t("div",H,[e[9]||(e[9]=t("label",{for:"phone"},"전화번호",-1)),n(t("input",{id:"phone",type:"tel","onUpdate:modelValue":e[3]||(e[3]=s=>p.value=s),placeholder:"010-1234-5678",required:""},null,512),[[d,p.value]])]),t("div",K,[e[10]||(e[10]=t("label",{for:"address-zip"},"주소",-1)),t("div",O,[n(t("input",{id:"address-zip",type:"text","onUpdate:modelValue":e[4]||(e[4]=s=>f.value=s),placeholder:"우편번호",required:"",readonly:""},null,512),[[d,f.value]]),t("button",{type:"button",class:"btn-zipcode-search",onClick:q}," 우편번호 찾기 ")]),n(t("input",{id:"address-main",type:"text","onUpdate:modelValue":e[5]||(e[5]=s=>u.value=s),placeholder:"기본 주소",required:"",readonly:"",class:"mt-2"},null,512),[[d,u.value]]),n(t("input",{id:"address-detail",type:"text","onUpdate:modelValue":e[6]||(e[6]=s=>r.value=s),placeholder:"상세 주소 (동/호수 등)",class:"mt-2"},null,512),[[d,r.value]])]),y.value?(V(),k("div",{key:0,class:"postcode-modal-overlay",onClick:S(g,["self"])},[t("div",X,[P(l,{onComplete:C,width:600,height:600,animation:!0}),t("button",{class:"close-btn",onClick:g},"닫기")])])):I("",!0),t("div",F,[t("button",{type:"submit",class:"btn-login",disabled:b.value},"가입 완료",8,J),t("button",{type:"button",class:"btn-signup",onClick:e[7]||(e[7]=s=>o.$router.push({name:"login"}))}," 취소 ")])],32)])])}}},te=U(Q,[["__scopeId","data-v-d07fff24"]]);export{te as default};
